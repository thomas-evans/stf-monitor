[![Figma Design](https://img.shields.io/badge/Figma%20Design-White?logo=data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTcyIiBoZWlnaHQ9IjI0NyIgdmlld0JveD0iMCAwIDE3MiAyNDciIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxnIGlkPSJHcm91cCI+CjxwYXRoIGlkPSJSZWN0YW5nbGUgNTUiIGQ9Ik0xNjQgNDYuNUMxNjQgNjcuNzYzIDE0Ni43NjMgODUgMTI1LjUgODVMODYgODVMODYgOC4wMDAxTDEyNS41IDguMDAwMUMxNDYuNzYzIDguMDAwMSAxNjQgMjUuMjM3MSAxNjQgNDYuNVY0Ni41WiIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLXdpZHRoPSIxNS4wODEiLz4KPHBhdGggaWQ9IlJlY3RhbmdsZSA1NV8yIiBkPSJNOCA0Ni41QzggNjcuNzYzIDI1LjIzNyA4NSA0Ni41IDg1TDg2IDg1TDg2IDguMDAwMUw0Ni41IDguMDAwMUMyNS4yMzcgOC4wMDAxIDggMjUuMjM3MSA4IDQ2LjVWNDYuNVoiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iMTUuMDgxIi8+CjxwYXRoIGlkPSJSZWN0YW5nbGUgNTVfMyIgZD0iTTggMTIzLjUwMUM4IDE0NC43NjQgMjUuMjM3IDE2Mi4wMDEgNDYuNSAxNjIuMDAxSDg2TDg2IDg1LjAwMTFMNDYuNSA4NS4wMDExQzI1LjIzNyA4NS4wMDExIDggMTAyLjIzOCA4IDEyMy41MDFWMTIzLjUwMVoiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iMTUuMDgxIi8+CjxwYXRoIGlkPSJSZWN0YW5nbGUgNTVfNCIgZD0iTTggMjAwLjVDOCAyMjEuNzYzIDI1LjQ4NTQgMjM5IDQ2Ljc0ODQgMjM5VjIzOUM2OC4yODc1IDIzOSA4NiAyMjEuNTM5IDg2IDIwMEw4NiAxNjJINDYuNUMyNS4yMzcgMTYyIDggMTc5LjIzNyA4IDIwMC41VjIwMC41WiIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLXdpZHRoPSIxNS4wODEiLz4KPHBhdGggaWQ9IlJlY3RhbmdsZSA1NV81IiBkPSJNODYgMTIzLjUwMUM4NiAxNDQuNzY0IDEwMy4yMzcgMTYyLjAwMSAxMjQuNSAxNjIuMDAxSDEyNS41QzE0Ni43NjMgMTYyLjAwMSAxNjQgMTQ0Ljc2NCAxNjQgMTIzLjUwMVYxMjMuNTAxQzE2NCAxMDIuMjM4IDE0Ni43NjMgODUuMDAxMSAxMjUuNSA4NS4wMDExSDEyNC41QzEwMy4yMzcgODUuMDAxMSA4NiAxMDIuMjM4IDg2IDEyMy41MDFWMTIzLjUwMVoiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iMTUuMDgxIi8+CjwvZz4KPC9zdmc+Cg==&color=001871)](https://www.figma.com/file/r3q7hfNWqvYsSC2TMGdlep/Design-Deliverable?node-id=14%3A112&t=TK84qTWqavrVeFrq-1)
[![Netlify Status](https://api.netlify.com/api/v1/badges/c0504e43-9353-4cb5-90f4-7479d12f6aa7/deploy-status)](https://app.netlify.com/sites/stf-monitor/deploys)

# stf-monitor

## Ionic Angular Application Using the Short-term Funding Monitor - API from [OFR](https://www.financialresearch.gov/short-term-funding-monitor/api/)

[https://stf-monitor.netlify.app/](https://stf-monitor.netlify.app/)

### Goals for this project:

- [x] Create an [Angular](https://angular.io/) app using [Ionic](https://ionicframework.com/docs/)
- [x] Dynamically generate charts using [Chart.js](https://www.chartjs.org/)
- [x] Use [Angular Universal Prerendering](https://angular.io/guide/prerendering)
- [x] Use [Cypress](https://www.cypress.io/) to write end-to-end tests
- [x] Integrate [eslint](https://eslint.org/) and [prettier](https://prettier.io/)
  in [Angular CLI](https://github.com/angular-eslint/angular-eslint) and [WebStorm](https://www.jetbrains.com/webstorm/) to autocorrect/format code
- [x] Use [Netlify](https://www.netlify.com/) to build and host the application
- [x] Use [Figma](https://www.figma.com/) to create design artifacts
- [ ] Create a universal error handler
- [ ] Add progressive web app functionality
- [ ] Create a help overlay

[//]: # (TODO: show skeleton text in between calls)
[//]: # (TODO: Create a universal error handler)
[//]: # (TODO: Add progressive web app functionality)
[//]: # (TODO: Create a help overlay)
[//]: # (TODO: write chart data timespan property)
[//]: # (TODO: write tooltip callback unit tests)

### [Figma Design](https://www.figma.com/file/r3q7hfNWqvYsSC2TMGdlep/Design-Deliverable?node-id=14%3A112&t=TK84qTWqavrVeFrq-1)

### [Netlify Build Results](https://app.netlify.com/sites/stf-monitor/deploys)

### Installation and Usage
- [Clone the Repository](https://github.com/thomas-evans/stf-monitor.git)
- Open Terminal and run `npm install` to install dependencies
- `npm run start` : Development Server
- `npm run test` : Karma Test Runner
- `npm run lint` : Linter
- `npm run e2e` : Cypress Test Runner
- `npm run prerender` : Angular Universal Pre-renderer, output will be created in `/dist/`

### Known issues

#### Site flickers after prerendering

This is due to the Angular application not reusing existing pre-rendered DOM elements and recreating them when the
application
loads. [Angular 16 seeks to resolve this](https://blog.angular.io/whats-next-for-server-side-rendering-in-angular-2a6f27662b67).

#### Some chart filters return no data

An expression could be added to check for no data returned from the chart filter service or a property on the component
class could determine the timespan of the data.

#### Some E2E tests are unreliable

Prerendering has changed the rendering flow of Angular/Ionic. I haven't found a reliable hook for when the app is fully
operational. 
